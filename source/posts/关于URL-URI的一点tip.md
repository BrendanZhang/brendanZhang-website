---
title: 关于URL-URI的一点tip
date: 2018-10-02 00:28:23
tags: HTTP
categories: HTTP
---

# 1. URL/URI 在 web 领域有很多不能包含的内容

## I.可以有什么

-   只有字母和数字[0-9a-zA-Z]
-   一些特殊符号`$-_.+!*'(),`
-   以及**某些**`保留字`

才可以不经过编码直接用于 URL

### i.保留字

|           字符            |   描述   |  用法  | 编码 |
| :-----------------------: | :------: | :----: | :--: |
|             ;             |   分号   |  保留  | %3B  |
|             /             |   斜线   |  保留  | %2F  |
|             ?             |   问号   |  保留  | %3F  |
|             :             |   冒号   |  保留  | %3A  |
|             @             | “at”符号 |  保留  | %4O  |
|             =             |   等号   |  保留  | %3D  |
|             &             | “和”符号 |  保留  | %26  |
|             <             |  小于号  | 不安全 | %3C  |
|             >             |  大于号  | 不安全 | %3E  |
|             “             |  双引号  | 不安全 | %22  |
|             #             |   井号   | 不安全 | %23  |
|             %             |  百分号  | 不安全 | %25  |
|             %             |  百分号  | 不安全 | %25  |
|             {             | 左大括号 | 不安全 | %7B  |
|             }             | 右大括号 | 不安全 | %7D  |
|            `|`            |   竖线   | 不安全 | %7C  |
| `\` | 反斜线 |不安全 |%5C |
|             ^             |  加字号  | 不安全 | %5E  |
|             ~             |   波浪   | 不安全 | %7E  |
|             [             | 左中括号 | 不安全 | %5B  |
|             ]             | 右中括号 | 不安全 | %5D  |
|  `|反单引号| 不安全| %60  |
|                           |   空格   | 不安全 | %20  |

## 2.不能有什么

-   汉字
-   特殊字符

举个例子:

-   `http://xxx.com/你好`
-   ↑ 这就是个不合语法的
-   `http://xxx.com/%E4%BD%A0%E5%A5%BD`
-   ↑ 这个才是它应该的样子
-   转译为 `URL Escape Code` 转译后才是他本来的样子

# 2.既然存在不能出现的东西，怎么解决？

这时候要分两种情况

## I.encodeURI

举个例子：

-   `http://google.com/search?q=http://xxx.com/%E4%BD%A0%E5%A5%BD?a=1`
-   ↑ 一点毛病没有
-   `http://google.com/search?q=http://xxx.com/%E4%BD%A0%E5%A5%BD?a=1&b=2`
-   ↑ 这里就有问题了：查询参数在`&`这里断开了，那么实际上`b=2`不会被算进去
-   这时候就存在歧义了

**这时候就要用到 ↓**

## II.encodeURIComponent

-   这时候就需要`encodeURIComponent`
-   `http://google.com/search?q=http://xxx.com/%E4%BD%A0%E5%A5%BD?a=1&b=2`
-   在这个例子中
-   可以把`http://xxx.com/%E4%BD%A0%E5%A5%BD?a=1&b=2`整体作为一个查询参数

```
encodeURIComponent(1&b=2)
"1%26b%3D2"
```

这个函数将 `&` 和 `=` 都转译了

## III.两个函数的区别

-   如果这是一个完整的网址
-   那么使用`encodeURI`

-   如果这是一段查询参数，或者是网址的一部分
-   那么请使用`encodeURIComponent`
